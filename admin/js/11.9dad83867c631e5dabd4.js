webpackJsonp([11],{"2CFP":function(e,t){},"T/og":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("lC5x"),n=r.n(a),i=r("4YfN"),s=r.n(i),l=r("J0Oq"),o=r.n(l),c=r("C/I2"),u=r("cAgV"),d=r("0xDb"),p={name:"DetailFilter",directives:{waves:u.a},data:function(){return{pickerOptions:d.f,filter:{time:""}}},methods:{handleFilter:function(){this.$emit("filterDetail",this.filter)}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-date-picker",{staticStyle:{"margin-bottom":"10px"},attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}}),e._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查 询")])],1)],1)},staticRenderFns:[]};var f=r("C7Lr")(p,g,!1,function(e){r("2CFP")},"data-v-38b871c4",null).exports,m=r("B4UA"),v={name:"DetailTable",props:{data:{type:Array,required:!0},pageQuery:{type:Object,required:!0},total:{required:!0},listLoading:{required:!0,default:!0}},data:function(){return{loading:this.listLoading}},watch:{listLoading:function(e){this.loading=e}},methods:{changeSize:function(e){this.pageQuery.max_results=e,this.$emit("getIntegralList")},changePage:function(e){this.pageQuery.page=e,this.$emit("getIntegralList")},delete_rebate:function(e){var t=this;return o()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(m.b)(e.id);case 2:t.$message.success("删除成功");case 3:case"end":return r.stop()}},r,t)}))()},cancelEdit:function(e){e.number=e.originalNumber,e.edit=!1},confirmEdit:function(e){var t=this;return o()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.edit=!1,e.originalNumber=e.number,r.next=4,Object(m.e)(e.id,{number:Number(e.number)});case 4:t.$message.success("更新成功"),t.$emit("getIntegralList");case 6:case"end":return r.stop()}},r,t)}))()}}},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,border:"",fit:""}},[r("el-table-column",{attrs:{prop:"time",label:"时间",sortable:"",width:"170"}}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"积分",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.edit?[r("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"row.number"}}),e._v(" "),r("span",{staticClass:"cancel-btn text-warning",staticStyle:{position:"absolute",top:"14px",right:"17px",cursor:"pointer"},on:{click:function(t){return e.cancelEdit(a)}}},[e._v("\n                取消\n              ")])]:r("span",[e._v(e._s(a.number))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"desc",label:"描述",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?r("span",{staticClass:"text-success",staticStyle:{cursor:"pointer"},on:{click:function(r){return e.confirmEdit(t.row)}}},[e._v("\n              保存\n            ")]):r("span",{staticClass:"span-color",on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("\n              编辑\n            ")]),e._v(" "),r("span",{staticClass:"text-explode"},[e._v("|")]),e._v(" "),r("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.row.visible,callback:function(r){e.$set(t.row,"visible",r)},expression:"scope.row.visible"}},[r("p",[e._v("确认删除？")]),e._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.delete_rebate(t.row)}}},[e._v("确定")])],1),e._v(" "),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-pagination",{attrs:{"current-page":e.pageQuery.page,"page-sizes":[10,20,30,40],"page-size":e.pageQuery.max_results,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changeSize,"current-change":e.changePage}})],1)],1)],1)},staticRenderFns:[]};var h=r("C7Lr")(v,b,!1,function(e){r("qTHS")},"data-v-166f6090",null).exports,y={name:"index",components:{PanelTitle:c.a,DetailFilter:f,DetailTable:h},data:function(){return{listLoading:!0,title:"用户【"+this.$route.query.id+"】详细积分",data:[],total:0,uid:this.$route.query.id,listQuery:{argsQuery:{},pageQuery:{page:1,max_results:10}}}},created:function(){this.getIntegralList()},methods:{filterDetail:function(e){this.listQuery.pageQuery.page=1,this.listQuery.argsQuery=e,this.getIntegralList()},getIntegralList:function(){var e=this;return o()(n.a.mark(function t(){var r,a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=s()({},e.listQuery)).argsQuery=Object(d.h)(r.argsQuery,"time"),r.argsQuery.type="profit",r.argsQuery.user=e.uid,a="-id",t.next=7,Object(m.c)(r,{},a);case 7:i=t.sent,e.data=i._items.map(function(t){return e.$set(t,"visible",!1),e.$set(t,"edit",!1),t.originalNumber=t.number,t}),e.listLoading=!1;case 10:case"end":return t.stop()}},t,e)}))()}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("panel-title",{attrs:{title:e.title,"is-line":""}}),e._v(" "),r("detail-filter",{on:{filterDetail:e.filterDetail}}),e._v(" "),r("detail-table",{ref:"table",attrs:{"page-query":e.listQuery.pageQuery,total:e.total,data:e.data,"list-loading":e.listLoading},on:{getIntegralList:e.getIntegralList}})],1)},staticRenderFns:[]};var w=r("C7Lr")(y,_,!1,function(e){r("mORG")},"data-v-4b6692db",null);t.default=w.exports},mORG:function(e,t){},qTHS:function(e,t){}});