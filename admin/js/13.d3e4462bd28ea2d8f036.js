webpackJsonp([13],{"3yBJ":function(e,t){},HV7I:function(e,t){},M5mh:function(e,t){},gWIU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("4YfN"),n=r.n(a),l=r("C/I2"),i=r("cAgV"),o=r("0xDb"),s={name:"InFilter",directives:{waves:i.a},data:function(){return{pickerOptions:o.f,argsQuery:{create_time:""}}},methods:{handleFilter:function(){this.$emit("filterOrder",this.argsQuery)}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.argsQuery.create_time,callback:function(t){e.$set(e.argsQuery,"create_time",t)},expression:"argsQuery.create_time"}}),e._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查 询")])],1)],1)},staticRenderFns:[]};var u=r("C7Lr")(s,d,!1,function(e){r("M5mh")},"data-v-172a3fd3",null).exports,c=r("lC5x"),p=r.n(c),g=r("J0Oq"),m=r.n(g),f=r("psq8"),h=r.n(f),v=r("R2Wb"),y=["ID","编号","手机号","创建时间","交易金额","总数量","商品ID"],_=["id","order_number","phone","create_time","amount","number","commodity"],b={name:"Table",props:{data:{type:Array,required:!0},allOrder:{type:Array},pageQuery:{type:Object,required:!0},total:{required:!0},listLoading:{required:!0,default:!0}},data:function(){return{loading:this.listLoading,downloadLoading:!1,downloadLoadingAll:!1}},watch:{listLoading:function(e){this.loading=e}},methods:{sum:function(e){return h.a.sum(e)},getIdFormArray:o.d,changeSize:function(e){this.pageQuery.max_results=e,this.$emit("getOrderList")},changePage:function(e){this.pageQuery.page=e,this.$emit("getOrderList")},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"phone"===e?t.user.phone:t[e]})})},handleDownload:function(){var e=this;return m()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.downloadLoading=!0,t.next=3,Object(v.a)(y,_,e.data,"用户收支金额",e.formatJson);case 3:e.downloadLoading=!1;case 4:case"end":return t.stop()}},t,e)}))()},handleDownloadAll:function(){var e=this;return m()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.downloadLoadingAll=!0,t.next=3,Object(v.a)(y,_,e.allOrder,"所有用户收支金额",e.formatJson);case 3:e.downloadLoadingAll=!1;case 4:case"end":return t.stop()}},t,e)}))()}}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-button",{attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("\n      导出 Excel\n    ")]),e._v(" "),r("el-button",{attrs:{loading:e.downloadLoadingAll,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownloadAll}},[e._v("\n      全部 Excel\n    ")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.data,border:"",fit:""}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"order_number",label:"订单号",width:"300"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户/手机号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.user.real_name||"--"))]),e._v(" "),r("div",{staticClass:"span-color"},[e._v(e._s(t.row.user.phone))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"交易金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s("￥"+t.row.amount))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"总数量",width:"100",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"commodity",label:"商品信息"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-pagination",{attrs:{"current-page":e.pageQuery.page,"page-sizes":[10,20,30,40],"page-size":e.pageQuery.max_results,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changeSize,"current-change":e.changePage}})],1)],1)],1)},staticRenderFns:[]};var L=r("C7Lr")(b,w,!1,function(e){r("3yBJ")},"data-v-3bf90e5b",null).exports,O=r("Dvzh"),Q={name:"index",components:{PanelTitle:l.a,InFilter:u,InTable:L},data:function(){return{listLoading:!0,orderList:[],allOrder:[],total:0,listQuery:{argsQuery:{},pageQuery:{page:1,max_results:10}}}},created:function(){this.getOrderList(),this.getAllOrderList()},methods:{filterOrder:function(e){this.listQuery.pageQuery.page=1,this.listQuery.argsQuery=e,this.getOrderList()},getAllOrderList:function(){var e=this;Object(O.d)({argsQuery:{status:"delivered"}},{user:!0,record:!0}).then(function(t){e.allOrder=t._items})},getOrderList:function(){var e=this,t=n()({},this.listQuery);t.argsQuery=Object(o.h)(t.argsQuery,"create_time"),t.argsQuery.status="delivered";Object(O.d)(t,{user:!0,record:!0}).then(function(t){e.orderList=t._items,e.total=t._meta.total,e.listLoading=!1})}}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("panel-title",{attrs:{title:"收支金额","is-line":""}}),e._v(" "),r("in-filter",{on:{filterOrder:e.filterOrder}}),e._v(" "),r("in-table",{ref:"table",attrs:{"page-query":e.listQuery.pageQuery,total:e.total,data:e.orderList,"all-order":e.allOrder,"list-loading":e.listLoading},on:{getOrderList:e.getOrderList}})],1)},staticRenderFns:[]};var k=r("C7Lr")(Q,x,!1,function(e){r("HV7I")},"data-v-092ab96a",null);t.default=k.exports}});