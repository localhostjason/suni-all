webpackJsonp([13],{"+Psk":function(e,t){},LtNF:function(e,t){},"T/og":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),n=a.n(r),i=a("4YfN"),s=a.n(i),l=a("J0Oq"),o=a.n(l),c=a("C/I2"),u=a("cAgV"),d=a("0xDb"),p={name:"DetailFilter",directives:{waves:u.a},data:function(){return{pickerOptions:d.f,filter:{time:""}}},methods:{handleFilter:function(){this.$emit("filterDetail",this.filter)}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("el-date-picker",{staticStyle:{"margin-bottom":"10px"},attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.filter.time,callback:function(t){e.$set(e.filter,"time",t)},expression:"filter.time"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查 询")])],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(p,g,!1,function(e){a("+Psk")},"data-v-56323ee4",null).exports,m=a("B4UA"),v={name:"DetailTable",props:{data:{type:Array,required:!0},pageQuery:{type:Object,required:!0},total:{required:!0},listLoading:{required:!0,default:!0}},data:function(){return{loading:this.listLoading}},watch:{listLoading:function(e){this.loading=e}},methods:{changeSize:function(e){this.pageQuery.max_results=e,this.$emit("getIntegralList")},changePage:function(e){this.pageQuery.page=e,this.$emit("getIntegralList")},delete_rebate:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(m.b)(e.id);case 2:t.$message.success("删除成功"),t.$emit("getIntegralList");case 4:case"end":return a.stop()}},a,t)}))()},cancelEdit:function(e){e.number=e.originalNumber,e.edit=!1},confirmEdit:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.edit=!1,e.originalNumber=e.number,a.next=4,Object(m.e)(e.id,{number:Number(e.number)});case 4:t.$message.success("更新成功"),t.$emit("getIntegralList");case 6:case"end":return a.stop()}},a,t)}))()}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,border:"",fit:""}},[a("el-table-column",{attrs:{prop:"time",label:"时间",sortable:"",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"积分",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:r.number,callback:function(t){e.$set(r,"number",t)},expression:"row.number"}}),e._v(" "),a("span",{staticClass:"cancel-btn text-warning",staticStyle:{position:"absolute",top:"14px",right:"17px",cursor:"pointer"},on:{click:function(t){return e.cancelEdit(r)}}},[e._v("\n                取消\n              ")])]:a("span",[e._v(e._s(r.number))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",{staticClass:"text-success",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.confirmEdit(t.row)}}},[e._v("\n              保存\n            ")]):a("span",{staticClass:"span-color",on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("\n              编辑\n            ")]),e._v(" "),a("span",{staticClass:"text-explode"},[e._v("|")]),e._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.row.visible,callback:function(a){e.$set(t.row,"visible",a)},expression:"scope.row.visible"}},[a("p",[e._v("确认删除？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:function(e){t.row.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.delete_rebate(t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{"current-page":e.pageQuery.page,"page-sizes":[10,20,30,40],"page-size":e.pageQuery.max_results,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changeSize,"current-change":e.changePage}})],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(v,b,!1,function(e){a("wIbC")},"data-v-2ba3d6a2",null).exports,y={name:"index",components:{PanelTitle:c.a,DetailFilter:f,DetailTable:h},data:function(){return{listLoading:!0,title:"用户【"+this.$route.query.id+"】详细积分",data:[],total:0,uid:this.$route.query.id,listQuery:{argsQuery:{},pageQuery:{page:1,max_results:10}}}},created:function(){this.getIntegralList()},methods:{filterDetail:function(e){this.listQuery.pageQuery.page=1,this.listQuery.argsQuery=e,this.getIntegralList()},getIntegralList:function(){var e=this;return o()(n.a.mark(function t(){var a,r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=s()({},e.listQuery)).argsQuery=Object(d.h)(a.argsQuery,"time"),a.argsQuery.type="profit",a.argsQuery.user=e.uid,r="-id",t.next=7,Object(m.c)(a,{},r);case 7:i=t.sent,e.data=i._items.map(function(t){return e.$set(t,"visible",!1),e.$set(t,"edit",!1),t.originalNumber=t.number,t}),e.listLoading=!1;case 10:case"end":return t.stop()}},t,e)}))()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("panel-title",{attrs:{title:e.title,"is-line":""}}),e._v(" "),a("detail-filter",{on:{filterDetail:e.filterDetail}}),e._v(" "),a("detail-table",{ref:"table",attrs:{"page-query":e.listQuery.pageQuery,total:e.total,data:e.data,"list-loading":e.listLoading},on:{getIntegralList:e.getIntegralList}})],1)},staticRenderFns:[]};var w=a("C7Lr")(y,_,!1,function(e){a("LtNF")},"data-v-6b173dca",null);t.default=w.exports},wIbC:function(e,t){}});