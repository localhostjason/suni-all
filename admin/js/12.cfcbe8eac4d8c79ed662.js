webpackJsonp([12],{JGot:function(e,t){},gWIU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("4YfN"),n=r.n(a),i=r("C/I2"),o=r("cAgV"),l=r("0xDb"),s={name:"InFilter",directives:{waves:o.a},data:function(){return{pickerOptions:l.f,argsQuery:{create_time:""}}},methods:{handleFilter:function(){this.$emit("filterOrder",this.argsQuery)}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",{attrs:{span:24}},[r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.argsQuery.create_time,callback:function(t){e.$set(e.argsQuery,"create_time",t)},expression:"argsQuery.create_time"}}),e._v(" "),r("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查 询")])],1)],1)},staticRenderFns:[]};var u=r("C7Lr")(s,d,!1,function(e){r("nuEq")},"data-v-58cdd9f1",null).exports,c=r("psq8"),p=r.n(c),g={name:"Table",props:{data:{type:Array,required:!0},pageQuery:{type:Object,required:!0},total:{required:!0},listLoading:{required:!0,default:!0}},data:function(){return{loading:this.listLoading,downloadLoading:!1}},watch:{listLoading:function(e){this.loading=e}},methods:{sum:function(e){return p.a.sum(e)},getIdFormArray:l.d,changeSize:function(e){this.pageQuery.max_results=e,this.$emit("getOrderList")},changePage:function(e){this.pageQuery.page=e,this.$emit("getOrderList")},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?Object(l.e)(t[e]):t[e]})})},handleDownload:function(){var e=this;this.downloadLoading=!0,r.e(20).then(r.bind(null,"zWO4")).then(function(t){var r=e.data,a=e.formatJson(["order_number","phone","create_time","amount","number","commodity"],r);t.export_json_to_excel({header:["订单号","手机号","创建时间","交易金额","总数量","商品ID"],data:a,filename:"用户收支金额",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1})}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-button",{attrs:{loading:e.downloadLoading,type:"primary",icon:"document"},on:{click:e.handleDownload}},[e._v("\n      导出 Excel\n    ")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.data,border:"",fit:""}},[r("el-table-column",{attrs:{prop:"order_number",label:"订单号",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户/手机号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v(e._s(t.row.user.real_name||"--"))]),e._v(" "),r("div",{staticClass:"span-color"},[e._v(e._s(t.row.user.phone))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"交易金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s("￥"+t.row.amount))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"总数量",width:"100",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"commodity",label:"商品信息"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-pagination",{attrs:{"current-page":e.pageQuery.page,"page-sizes":[10,20,30,40],"page-size":e.pageQuery.max_results,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.changeSize,"current-change":e.changePage}})],1)],1)],1)},staticRenderFns:[]};var f=r("C7Lr")(g,m,!1,function(e){r("JGot")},"data-v-29f559a5",null).exports,h=r("Dvzh"),y={name:"index",components:{PanelTitle:i.a,InFilter:u,InTable:f},data:function(){return{listLoading:!0,orderList:[],total:0,listQuery:{argsQuery:{},pageQuery:{page:1,max_results:10}}}},created:function(){this.getOrderList()},methods:{filterOrder:function(e){this.listQuery.pageQuery.page=1,this.listQuery.argsQuery=e,this.getOrderList()},getOrderList:function(){var e=this,t=n()({},this.listQuery);t.argsQuery=Object(l.h)(t.argsQuery,"create_time"),t.argsQuery.status="delivered";Object(h.d)(t,{user:!0,record:!0}).then(function(t){e.orderList=t._items,e.total=t._meta.total,e.listLoading=!1})}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("panel-title",{attrs:{title:"收支金额","is-line":""}}),e._v(" "),r("in-filter",{on:{filterOrder:e.filterOrder}}),e._v(" "),r("in-table",{ref:"table",attrs:{"page-query":e.listQuery.pageQuery,total:e.total,data:e.orderList,"list-loading":e.listLoading},on:{getOrderList:e.getOrderList}})],1)},staticRenderFns:[]};var _=r("C7Lr")(y,v,!1,function(e){r("xyBB")},"data-v-27c3013a",null);t.default=_.exports},nuEq:function(e,t){},xyBB:function(e,t){}});